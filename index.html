<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>إلى إشراق الحبردي</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #f3e9ff;
      --paper: #ffeba6;
      --ink: #4a2c6d;
      --env-1: #caa8ff;   /* جسم الظرف */
      --env-2: #b894ff;   /* الغطاء */
      --env-3: #a57ff4;   /* الجيب الأمامي */
      --shadow: 0 18px 35px rgba(33, 20, 53, .25);
      --heart: #e25555;   /* لون الختم */
      --radius: 14px;
    }

    *{ box-sizing: border-box }
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background: var(--bg);
      font-family: "Tajawal", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--ink);
    }

    /* غلاف الظرف */
    .stage{
      width:min(92vw, 460px);
      display:grid;
      gap:14px;
      place-items:center;
      padding:28px 12px 80px; /* مساحة للفوتر */
    }

    .envelope-wrap{
      width:100%;
      perspective: 1200px;
      cursor:pointer;
      user-select:none;
    }

    .envelope{
      width:100%;
      aspect-ratio: 4 / 3;           /* يحافظ على النسبة */
      position:relative;
      filter: drop-shadow(var(--shadow));
      border-radius: var(--radius);
      overflow: visible;
    }

    /* خلفية بنقشة قلوب (SVG inline كـ data-uri) */
    .hearts{
      --svg: url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'>\
        <defs>\
          <path id='h' d='M12 9c0-3 2.4-5.5 5.4-5.5c1.9 0 3.6 1 4.6 2.6C23 4.5 24.7 3.5 26.6 3.5C29.6 3.5 32 6 32 9c0 7-9.9 10.8-12 16C17.9 19.8 8 16 8 9z' fill='%23ffffff' opacity='0.18'/>\
        </defs>\
        <rect width='60' height='60' fill='%23caa8ff'/>\
        <use href='%23h' x='4' y='4'/>\
        <use href='%23h' x='28' y='20'/>\
        <use href='%23h' x='8' y='32'/>\
        <use href='%23h' x='34' y='-2'/>\
      </svg>");
      background-image: var(--svg);
      background-size: 140px 140px;
      background-repeat: repeat;
      border-radius: var(--radius);
    }

    /* جسم الظرف */
    .body{
      position:absolute; inset:0;
      background: linear-gradient(180deg, #d7c0ff 0%, var(--env-1) 40%, #b48cff 100%);
      border-radius: var(--radius);
      overflow:hidden;
    }
    .body.hearts{ mix-blend-mode: multiply; opacity:.9; }

    /* الجيب الأمامي (الجزء السفلي الظاهر) */
    .pocket{
      position:absolute;
      inset:38% 0 0 0;
      background: linear-gradient(180deg, #b892ff 0%, var(--env-3) 60%);
      clip-path: polygon(0 0, 50% 18%, 100% 0, 100% 100%, 0 100%);
      border-bottom-left-radius: var(--radius);
      border-bottom-right-radius: var(--radius);
    }

    /* الغطاء العلوي */
    .flap{
      position:absolute;
      inset:-2px -2px 48% -2px; /* أعلى الظرف */
      transform-origin: top;
      transform: rotateX(0deg);
      transition: transform .8s cubic-bezier(.2,.7,.2,1);
      background: linear-gradient(180deg, var(--env-2) 0%, #a87cff 100%);
      clip-path: polygon(0 0, 100% 0, 50% 68%);
      border-top-left-radius: var(--radius);
      border-top-right-radius: var(--radius);
    }
    /* نقشة القلوب على الغطاء أيضًا */
    .flap::after{
      content:"";
      position:absolute; inset:0;
      background-image: radial-gradient(transparent, transparent 35%, rgba(0,0,0,.12) 36%),
                       repeating-linear-gradient(45deg, rgba(255,255,255,.12) 0 12px, rgba(0,0,0,0) 12px 24px);
      border-top-left-radius: var(--radius);
      border-top-right-radius: var(--radius);
      mix-blend-mode: soft-light;
    }
    .flap.hearts{
      background-image:
        url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='80' height='80'><g opacity='.18' fill='%23ffffff'><path d='M40 28c0-6 4.8-11 10.8-11c3.8 0 7 2 9 5.2C62 19 65.2 17 69 17c6 0 10.8 5 10.8 11c0 14-19.8 21.6-24 32c-4.2-10.4-24-18-24-32z'/></g></svg>");
      background-size: 160px 160px; background-repeat: repeat;
    }

    /* الختم (قلب) يظهر عند الإغلاق ويبتعد عند الفتح */
    .seal{
      position:absolute;
      top:32%;
      left:50%;
      width:52px; height:52px;
      transform: translate(-50%, -50%) scale(1);
      transition: transform .6s ease, opacity .6s ease;
      z-index: 6;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,.25));
    }
    .seal svg{ width:100%; height:100% }
    .seal .wax{ fill: var(--heart); }
    .seal .shine{ fill: #fff; opacity:.25 }

    /* الورقة الصفراء (الرسالة) */
    .letter{
      position:absolute;
      inset:10px;
      background: var(--paper);
      border-radius: 10px;
      padding: 18px 18px 22px;
      box-shadow: 0 10px 24px rgba(0,0,0,.12);
      transform: translateY(60%) rotateX(-12deg);
      transform-origin: bottom;
      opacity: 0;
      transition: transform .8s cubic-bezier(.2,.7,.2,1), opacity .8s;
      z-index:4;
      display:flex; align-items:center; justify-content:center;
      text-align: center;
    }
    .letter .content{
      color: var(--ink);
      line-height: 1.9;
      font-size: 1.05rem;
    }

    /* حالات الفتح/الإغلاق */
    .envelope.open .flap{ transform: rotateX(180deg); }
    .envelope.open .letter{
      transform: translateY(0) rotateX(0deg);
      opacity: 1;
    }
    .envelope.open .seal{ transform: translate(-50%,-120%) scale(.7); opacity:.0; }

    .hint{
      color:#6a0dad; font-weight:700; font-size:.95rem;
      animation: pulse 1.6s infinite;
      margin-top:6px;
    }
    @keyframes pulse{
      0%{ transform: translateY(0); opacity:1}
      60%{ transform: translateY(-2px); opacity:.8}
      100%{ transform: translateY(0); opacity:1}
    }

    /* فوتر */
    footer{
      position: fixed;
      inset:auto 0 10px 0;
      display:flex; justify-content:center;
      pointer-events:none;
      font-weight:700;
      letter-spacing:.6px;
      color:#6a0dad;
      text-shadow: 0 1px 0 #fff8;
    }
    footer .tag{
      background:#ffffffb3;
      padding:8px 14px;
      border-radius: 999px;
      box-shadow: 0 6px 14px rgba(107, 33, 168, .18);
      pointer-events:auto;
      backdrop-filter: blur(4px);
    }

    /* تحسينات لمس الشاشات */
    @media (hover: none){
      .envelope-wrap{ cursor: default; }
    }
  </style>
</head>
<body>

  <main class="stage">
    <div class="envelope-wrap" aria-label="افتح/أغلق الظرف">
      <div class="envelope" id="envelope">
        <!-- جسم الظرف بنقشة القلوب -->
        <div class="body hearts"></div>

        <!-- الجيب الأمامي -->
        <div class="pocket"></div>

        <!-- الغطاء العلوي بنقشة القلوب -->
        <div class="flap hearts"></div>

        <!-- ختم قلب يظهر أثناء الإغلاق -->
        <div class="seal" aria-hidden="true">
          <svg viewBox="0 0 64 64" role="img">
            <circle class="wax" cx="32" cy="32" r="24"/>
            <path class="shine" d="M22 20a7 7 0 0 1 9 2a7 7 0 0 1 9-2c6 4 5 12-1 17s-8 7-8 7s-2-2-8-7s-7-13-1-17z"/>
          </svg>
        </div>

        <!-- الرسالة داخل الورقة الصفراء -->
        <article class="letter">
          <div class="content">
            <p>
              «في يومِ المديرِ العالمي، أرفعُ لكِ رسالةَ شكرٍ تليقُ بمقامِك.
              شكرًا لأنكِ قدّمتِ لنا معنى القيادةِ كما ينبغي أن تكون؛
              إنسانيّةٌ حاضرة، وحرصٌ لا يهدأ، وتفانٍ يتركُ أثره قبل أن يُقال.
              لقد كان لحضوركِ في العمل أثرٌ واضحٌ في نفوسنا؛
              فالقائدُ الحقّ لا يُسيّر فريقَه فحسب، بل يُلهمهم ويُشعرهم أن لجهودهم قيمة.
              دمتِ مصدرَ أثرٍ وارتقاء.»
            </p>
          </div>
        </article>
      </div>
    </div>

    <div id="hint" class="hint">انقري على الظرف لفتحه</div>
  </main>

  <footer>
    <div class="tag">نـــدى المجيـــرش</div>
  </footer>

  <script>
    const env = document.getElementById('envelope');
    const hint = document.getElementById('hint');

    // الحالة الابتدائية: مغلق
    let open = false;

    const updateHint = () => {
      hint.textContent = open ? 'انقري لإغلاق الظرف' : 'انقري على الظرف لفتحه';
    };

    const toggleEnvelope = () => {
      open = !open;
      env.classList.toggle('open', open);
      updateHint();
    };

    // فتح/إغلاق بالنقر
    env.addEventListener('click', toggleEnvelope);

    // لوحة المفاتيح لسهولة الوصول
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        toggleEnvelope();
      }
      if (e.key.toLowerCase() === 'escape' && open) {
        toggleEnvelope();
      }
    });

    updateHint();
  </script>
</body>
</html>
